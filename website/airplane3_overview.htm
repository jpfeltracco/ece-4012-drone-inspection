<!DOCTYPE html>
 <html>
 <head>
    <title>Overview</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/general.css">
<link rel="stylesheet" type="text/css" href="css/general.css">
<!-- Bootstrap core CSS -->
<!-- custom album styles-->
<link href="css/album.css" rel="stylesheet">
<!-- bootstrap core css -->
<link href="css/bootstrap.min.css" rel="stylesheet">
 <style>

.j1 {
  background-color:  rgb(228, 231, 235);
}

.green { 
    background: green;
    color: green;
}

.red {
    background: red;
}

#table1 {
  font-weight: normal;
  font-size: 150%;
    border-collapse: collapse;
    width: 100%;
}

#table1 td, #table1 th {
    border: 1px solid #ddd;
    padding: 8px;
}
#table2 tr:nth-child(odd){background-color: #f2f2f2;}
#table2 th {
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: white;
    color: black;
}
#table2 {
  font-weight: normal;
  font-size: 150%;
    border-collapse: collapse;
    width: 100%;
}

#table2 td, #table2 th {
    border: none; 
    padding: 8px;
}
#table2 tr:nth-child(odd){background-color: #f2f2f2;}
#table2 th {
    font-weight: bold;
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: white;
    color: black;
}


</style>
 </head>

<body>
     <section class="j1">
      <a href="index.htm" class="general">Home</a>
          <table id="table2">
          <tr>
          <th>Test Name: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>C-130A Inspection</b></th> 
          <th id="overall"></th>
        </tr>
        <tr>
          <td >Test Date: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;04-11-2018</td>
          <td>Test Description: &nbsp;&nbsp;Marietta Museum of History Aviation Wing</td>
        </tr>          
        </table>
      </section>
    

    <div class="container">
    <br />

    <iframe name="detail" src="airplane3_overview/overview_detail.htm" class="float-right" height="400" width="400";></iframe>
    <img src="airplane3_overview/airplane-1.png" usemap="#image-map">
    <map name="image-map">
        <area target="detail" alt="Cockpit Left" title="Cockpit Left" href="airplane3_overview/LINK_1.htm" onclick="return myFunction(this.href, 1)" coords="0,231,119,256" shape="rect" />
        <area target="detail" alt="Cockpit Right" title="Cockpit Right" href="airplane3_overview/LINK_2.htm" onclick="return myFunction(this.href, 2)" coords="0,206,118,229" shape="rect" />
        <area target="detail" alt="Wing Left Tip" title="Wing Left Tip" href="airplane3_overview/LINK_3.htm" onclick="return myFunction(this.href, 3)" coords="121,204,153,255" shape="rect" />
        <area target="detail" alt="Wing Right Tip" title="Wing Right Tip" href="airplane3_overview/LINK_4.htm" onclick="return myFunction(this.href, 4)" coords="155,205,200,255" shape="rect" />
        <area target="detail" alt="Tail Left" title="Tail Left" href="airplane3_overview/LINK_5.htm" onclick="return myFunction(this.href, 5)"  coords="0,120,200,203" shape="rect" />
        <area target="detail" alt="Tail Right" title="Tail Right" href="airplane3_overview/LINK_6.htm" onclick="return myFunction(this.href, 6)" coords="0,72,198,117" shape="rect" />
        <area target="detail" alt="Back Left" title="Back Left" href="airplane3_overview/LINK_7.htm" onclick="return myFunction(this.href, 7)" coords="0,0,198,70" shape="rect" />
        <area target="detail" alt="Back Right" title="Back Right" href="airplane3_overview/LINK_8.htm" onclick="return myFunction(this.href, 8)" coords="200,0,431,79" shape="rect" />
        <area target="detail" alt="Wing Left" title="Wing Left" href="airplane3_overview/LINK_9.htm" onclick="return myFunction(this.href, 9)" coords="201,81,309,148" shape="rect" />
        <area target="detail" alt="Wing Right" title="Wing Right" href="airplane3_overview/LINK_10.htm" onclick="return myFunction(this.href, 10)" coords="202,151,310,213" shape="rect" />
        <area target="detail" alt="Front Left" title="Front Left" href="airplane3_overview/LINK_11.htm" onclick="return myFunction(this.href, 11)" coords="203,215,318,250" shape="rect" />
        <area target="detail" alt="Front Right" title="Front Right" href="airplane3_overview/LINK_12.htm" onclick="return myFunction(this.href, 12)" coords="312,82,431,213" shape="rect" />
        <area target="detail" alt="Cockpit Left" title="Cockpit Left" href="airplane3_overview/LINK_13.htm" onclick="return myFunction(this.href, 13)" coords="321,215,431,291" shape="rect" />
        <area target="detail" alt="Cockpit Right" title="Cockpit Right" href="airplane3_overview/LINK_14.htm" onclick="return myFunction(this.href, 14)" coords="323,293,430,423" shape="rect" />
        <area target="detail" alt="Wing Left Tip" title="Wing Left Tip" href="airplane3_overview/LINK_15.htm" onclick="return myFunction(this.href, 15)" coords="205,252,319,288" shape="rect" />
        <area target="detail" alt="Wing Right Tip" title="Wing Right Tip" href="airplane3_overview/LINK_16.htm" onclick="return myFunction(this.href, 16)" coords="212,290,321,360" shape="rect" />
        <area target="detail" alt="Tail Left" title="Tail Left" href="airplane3_overview/LINK_17.htm" onclick="return myFunction(this.href, 17)"  coords="213,361,321,423" shape="rect" />
        <area target="detail" alt="Tail Right" title="Tail Right" href="airplane3_overview/LINK_18.htm" onclick="return myFunction(this.href, 18)" coords="214,425,428,514" shape="rect" />
        <area target="detail" alt="Back Left" title="Back Left" href="airplane3_overview/LINK_19.htm" onclick="return myFunction(this.href, 19)" coords="212,450,1,514" shape="rect" />
        <area target="detail" alt="Back Right" title="Back Right" href="airplane3_overview/LINK_20.htm" onclick="return myFunction(this.href, 20)" coords="0,394,213,448" shape="rect" />
        <area target="detail" alt="Wing Left" title="Wing Left" href="airplane3_overview/LINK_21.htm" onclick="return myFunction(this.href, 21)" coords="0,312,211,392" shape="rect" />
        <area target="detail" alt="Wing Right" title="Wing Right" href="airplane3_overview/LINK_22.htm" onclick="return myFunction(this.href, 22)" coords="155,257,205,308" shape="rect" />
        <area target="detail" alt="Front Left" title="Front Left" href="airplane3_overview/LINK_23.htm" onclick="return myFunction(this.href, 23)" coords="120,256,153,308" shape="rect" />
        <area target="detail" alt="Front Right" title="Front Right" href="airplane3_overview/LINK_24.htm" onclick="return myFunction(this.href, 24)" coords="1,281,120,310" shape="rect" />
        <area target="detail" alt="Front Right" title="Front Right" href="airplane3_overview/LINK_25.htm" onclick="return myFunction(this.href, 25)" coords="1,258,120,279" shape="rect" />
    </map>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </div>
    <section class = "j1">
          <table id="table1">
        <tr>
          <!-- expected location (waypoint) -->
          <td rowspan="2"> <b> Selection Data </b> </td>
          <td id="lat"></td>
          <td id="long"></td>
          <td id="heading"></td>
        </tr>
        <tr>
          <!--drone result (actual) -->
          <td id="geotag_lat"></td>
          <td id="geotag_long"></td>
          <td id="inspection"></p>
        </tr>
        <tr>
            <th colspan="4">Flight Path</th>
        <tr>
        <tr>
            <td colspan="4"><img class="plot" src="plot3.png" /></td>
        </tr>
        </table>
    </section>


     <script>
         var strLat = "Latitude: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
         var strLong = "Longitude: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
         var strHead = "Heading: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
         var strLatGeotag = "Geotag Latitude: &nbsp;&nbsp;&nbsp;&nbsp;";
         var strLongGeotag = "Geotag Longitude: &nbsp;";
         var strInspection = "Inspection for this section: ";
         var strOverall = "Overall Inspection Results: ";
         document.getElementById("lat").innerHTML = strLat;
         document.getElementById("long").innerHTML = strLong;
         document.getElementById("heading").innerHTML = strHead;
         document.getElementById("geotag_lat").innerHTML = strLatGeotag;
         document.getElementById("geotag_long").innerHTML = strLongGeotag;
         document.getElementById("inspection").innerHTML = strInspection;
         document.getElementById("overall").innerHTML = strOverall;
         var lines = [];

         $(document).ready(function() {
                           $.ajax({
                                  type: "GET",
                                  url: "./airplane3_overview/airplane_waypoints.csv",
                                  dataType: "text",
                                  success: function(data) {processData(data);},
                                  error: function(xhr, ajaxOptions, thrownError) { alert("Status: " + xhr.status + "     Error: " + thrownError + " You need to be running a web server to access the photo files"); }
                                  });
                           
                           });
                           
                           function processData(allText) {
                               var allTextLines = allText.split(/\r\n|\n/);
                               var headers = allTextLines[0].split(',');
                               for (var i=1; i<allTextLines.length; i++) {
                                   var data = allTextLines[i].split(',');
                                   if (data.length == headers.length) {
                                       var tarr = [];
                                       for (var j=0; j<headers.length; j++) {
                                           tarr.push(data[j]);
                                       }
                                       lines.push(tarr);
                                       console.log(tarr);
                                   }
                               }
                               console.log(lines)
                           }
     
     
     
            var x = 0;
            var y = 0;
            function myFunction(url, index) {
            
                var myWindow = window.open(url,"_blank", "width=400,height=400");
                myWindow.moveTo(x,y);
                myWindow.focus();
                x+=400;
                if(x > 1000) {
                    y+=400;
                    x = 0;
                    if(y>700) {
                        y = 0;
                    }
                }
                try {
                    console.log(index);
                    index -= 1;
                    console.log(lines[index]);
                    document.getElementById("lat").innerHTML = strLat + lines[index][1];
                    document.getElementById("long").innerHTML = strLong + lines[index][2];
                    document.getElementById("heading").innerHTML = strHead + lines[index][3];
                    document.getElementById("geotag_lat").innerHTML = strLatGeotag + lines[index][5];
                    document.getElementById("geotag_long").innerHTML = strLongGeotag + lines[index][6];
                    var insp = document.getElementById("inspection").innerHTML = lines[index][7];
                    if (insp == 'Damage Detected!') {
                        document.getElementById("inspection").style.color = "red";
                    } else {
                        document.getElementById("inspection").style.color = "black";
                    }
                    var el = document.getElementById("overall").innerHTML = lines[index][8];
                    if(el == 'Damage Detected!') {
                        document.getElementById("overall").style.color = "red";
                    }
                }
                catch(err) {
                    alert("Error: Index may be invalid");
                }
            }
     
     
     </script>


 </body>
 </html>

